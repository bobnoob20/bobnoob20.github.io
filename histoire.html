<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title id="SitHist_titre"></title>
  <link rel="stylesheet" href="style.css">
</head>
<body>

  <!-- Barre de navigation -->
<nav>
  <div class="nav-left">
    <div class="logo">A & J</div>
  </div>

  <div class="nav-center">
    <div class="menu">
      <a href="main.html#fete" id="nav_fete"></a>
      <a href="main.html#histoire" id="nav_histoire"></a>
      <a href="main.html#Informations" id="nav_info"></a>
      <a href="main.html#faq" id="nav_faq"></a>
    </div>
  </div>

  <div class="nav-right">
    <div class="menu">
      <a href="rsvp.html" class="btn-rsvp" id="nav_rsvp"></a>
      <div class="dropdown-langue">
        <button class="btn-langue" id="nav_langue"></button>
        <div class="dropdown-content">
          <a href="#" onclick="setLang('fr'); return false;">Français</a>
          <a href="#" onclick="setLang('en'); return false;">English</a>
          <a href="#" onclick="setLang('de'); return false;">Deutsch</a>
        </div>
      </div>
    </div>
  </div>
</nav>
  <!-- Section principale -->
  <section class="histoire-page">
    <h1 id="sithist_intro"></h1>

    <div class="chapitre">
    
      <p id="sithsit_intro2"></p>
    </div>


    <div class="chapitre">
  <div class="chapitre-content">
    <h2 id="chap1_titre"></h2>
    <p id="chap1_cont">
      
    </p>
  </div>
  <img src="image/ch1.png" alt="Rencontre" class="image-chapitre">
</div>


<div class="chapitre">
  <div class="chapitre-content">
    <h2 id="chap2_titre"></h2>
    <p id="chap2_cont"></p>
  </div>
  <div class="images-column">
        <img src="image/ch2_1.jpg" alt="Université" class="image2-chapitre">
        <img src="image/ch2_2.jpg" alt="Université" class="image2-chapitre">
    </div>


</div>



      
    <div class="chapitre">
       <div class="chapitre-content">
          <h2 id="chap3_titre"></h2>
      <p id="chap3_cont"></div>
    <div class="images-column">
        <img src="image/ch3.jpg" alt="Université" class="image2-chapitre">
        <img src="image/ch3_2.jpg" alt="Université" class="image2-chapitre">
    </div>
</div>

    <div class="chapitre">
        <div class="chapitre-content">
      <h2 id="chap4_titre"></h2>
      <p id="chap4_cont"></p>
    </div>
    <img src="image/ch4.jpg" alt="Demande en mariage" class="image-chapitre">
</div>


    <div class="chapitre">
        <div class="chapitre-content">
      <h2 id="chap5_titre"></h2>
      <p id="chap5_cont"></p>
    </div>
    <img src="image/ch5.jpg" alt="Aujourd'hui" class="image-chapitre">
    </div>

    <p class="signature" id="signa">
      Signé : votre narratrice de huit mois (et déjà un peu fière de ses parents),<br>
      <strong>Mayla</strong>
    </p>

    <a href="main.html#histoire" class="btn-histoire" id="button_retour"></a>
  </section>

<script>
  // attendre le DOM si besoin
  document.addEventListener("DOMContentLoaded", () => {

    let translations = {};
    const lang = localStorage.getItem("lang") || "fr";

    fetch(`lang/${lang}.json`)
      .then(response => response.json())
      .then(data => {
        translations = data;

        for (const id in translations) {
          const element = document.getElementById(id);
          if (!element) {
            console.warn(`Element #${id} introuvable dans la page`);
            continue;
          }

          let text = translations[id];

          if (typeof text !== "string") {
            console.warn(`La valeur de "${id}" n'est pas une string:`, text);
            text = String(text);
          }

          // 1) Gérer les cas où le JSON contient des séquences échappées littérales ("\n", "\t")
          //    -> remplace "\\n" (backslash + n) par un vrai newline, idem pour "\\t"
          text = text.replace(/\\\\n/g, "\\n"); // si double-échappé \\n -> \n (préparation)
          text = text.replace(/\\\\t/g, "\\t");

          // Maintenant remplacer les séquences littérales \n et \t par des caractères réels
          text = text.replace(/\\n/g, "\n");
          text = text.replace(/\\t/g, "\t");

          // 2) Remplacer entités HTML communes encodées par <br>
          text = text.replace(/&lt;br\s*\/?&gt;/gi, "<br>");

          // 3) Convertir les tabs réels en indentation visible (4 insécables)
          text = text.replace(/\t/g, "&nbsp;&nbsp;&nbsp;&nbsp;");

          // 4) Convertir tous les retours à la ligne réels en <br>
          //    On gère \r\n, \r et \n pour être complet
          text = text.replace(/\r\n|\r|\n/g, "<br>");

          // 5) Optionnel : normaliser les multiples <br> si tu veux un petit espace
          //    (ici on conserve les doubles <br> tels quels)
          //    Si tu veux forcer un espace plus grand pour les doubles sauts :
          // text = text.replace(/(<br>\s*){2,}/g, "<br><br>");

          // 6) Appliquer le HTML final
          element.innerHTML = text;

          // log utile pour debug
          console.log(`Injecté #${id}:`, text.slice(0, 200));
        }
      })
      .catch(err => {
        console.error("Erreur fetch lang JSON:", err);
      });

    // rendre setLang global (utilisé par onclick inline)
    window.setLang = function(language) {
      localStorage.setItem("lang", language);
      location.reload();
    };
  });
</script>


</body>

<script>
let lastScroll = 0;
const nav = document.querySelector("nav");

window.addEventListener("scroll", () => {
  const currentScroll = window.pageYOffset;

  // Scroll down → hide nav
  if (currentScroll > lastScroll && currentScroll > 50) {
    nav.style.transform = "translateY(-100%)";
  } 
  // Scroll up → show nav
  else {
    nav.style.transform = "translateY(0)";
  }

  lastScroll = currentScroll;
});
</script>



</html>




